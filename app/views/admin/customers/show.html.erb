<% content_for :page_title, "Customer Details" %>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
  <div class="lg:col-span-1">
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-lg font-semibold mb-4">Customer Information</h2>
      <div class="space-y-3">
        <div>
          <label class="text-sm font-medium text-gray-500">Name</label>
          <p class="text-lg"><%= @customer.full_name %></p>
        </div>

        <div>
          <label class="text-sm font-medium text-gray-500">Email</label>
          <p class="text-lg"><%= @customer.user.email %></p>
        </div>

        <% if @customer.phone.present? %>
          <div>
            <label class="text-sm font-medium text-gray-500">Phone</label>
            <p class="text-lg"><%= @customer.phone %></p>
          </div>
        <% end %>

        <div>
          <label class="text-sm font-medium text-gray-500">Address</label>
          <p class="text-lg"><%= @customer.full_address %></p>
        </div>
      </div>
    </div>
  </div>

  <div class="lg:col-span-2">
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-lg font-semibold mb-4">Order History</h2>

      <% if @orders.any? %>
        <div class="space-y-4">
          <% @orders.each do |order| %>
            <div class="border rounded-lg p-4">
              <div class="flex justify-between items-start mb-2">
                <div>
                  <div class="font-semibold">Order #<%= order.id %></div>
                  <div class="text-sm text-gray-600"><%= order.created_at.strftime("%B %d, %Y") %></div>
                </div>
                <div class="text-right">
                  <div class="font-semibold">$<%= number_with_precision(order.total, precision: 2) %></div>
                  <span class="text-xs px-2 py-1 rounded <%= order.paid? ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800' %>">
                    <%= order.status&.titleize || 'Pending' %>
                  </span>
                </div>
              </div>
              <%= link_to "View Order", admin_order_path(order), class: "text-blue-600 hover:underline text-sm" %>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-gray-500">No orders yet.</p>
      <% end %>
    </div>
  </div>
</div>